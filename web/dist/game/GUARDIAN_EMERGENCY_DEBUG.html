<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Guardian Debug Test</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
        }
        .section {
            background: #2d2d2d;
            border: 2px solid #00ff00;
            padding: 15px;
            margin: 15px 0;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: #3d3d3d;
        }
        .critical {
            color: #ff4444;
            font-weight: bold;
        }
        .success {
            color: #44ff44;
            font-weight: bold;
        }
        h1, h2 {
            color: #ffff00;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #44ff44;
        }
        code {
            background: #000;
            padding: 2px 5px;
            color: #00ffff;
        }
    </style>
</head>
<body>
    <h1>üîç DIVINE GUARDIAN - EMERGENCY DEBUG</h1>
    
    <div class="section">
        <h2>üìã CHECKLIST - L√†m theo th·ª© t·ª±:</h2>
        
        <div class="step">
            <input type="checkbox" id="step1">
            <label for="step1"><strong>B∆Ø·ªöC 1:</strong> ƒê√£ <span class="critical">RELOAD GAME</span> (Ctrl+R ho·∫∑c F5)?</label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="step2">
            <label for="step2"><strong>B∆Ø·ªöC 2:</strong> ƒê√£ m·ªü <span class="critical">CONSOLE</span> (F12)?</label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="step3">
            <label for="step3"><strong>B∆Ø·ªöC 3:</strong> Trong Horse Editor, ƒë√£ ch·ªçn <code>Divine Guardian</code> trong dropdown "‚ö° Special Skill"?</label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="step4">
            <label for="step4"><strong>B∆Ø·ªöC 4:</strong> ƒê√£ click n√∫t <code>Apply</code> trong Horse Editor?</label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="step5">
            <label for="step5"><strong>B∆Ø·ªöC 5:</strong> ƒê√£ click <code>Start Race</code>?</label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="step6">
            <label for="step6"><strong>B∆Ø·ªöC 6:</strong> ƒê√£ <span class="critical">ƒê·ª¢I √çT NH·∫§T 10 GI√ÇY</span> sau khi race b·∫Øt ƒë·∫ßu?</label>
        </div>
    </div>
    
    <div class="section">
        <h2>üîé CONSOLE LOGS - B·∫°n c√≥ th·∫•y d√≤ng n√†o sau ƒë√¢y KH√îNG?</h2>
        
        <div class="step">
            <input type="checkbox" id="log1">
            <label for="log1">
                <code>[GUARDIAN DEBUG] Race init - Guardian skill set for horse 0 with cooldown</code>
                <br><small>‚Üë Xu·∫•t hi·ªán khi Start Race</small>
            </label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="log2">
            <label for="log2">
                <code>[GUARDIAN DEBUG] Activating shield for horse 0 ...</code>
                <br><small>‚Üë Xu·∫•t hi·ªán sau 10 gi√¢y</small>
            </label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="log3">
            <label for="log3">
                <code>[GUARDIAN DEBUG] hasShield= true guardianShieldActive= true</code>
                <br><small>‚Üë Xu·∫•t hi·ªán ngay sau log tr√™n</small>
            </label>
        </div>
    </div>
    
    <div class="section">
        <h2>üëÅÔ∏è VISUAL - B·∫°n c√≥ th·∫•y KH√îNG?</h2>
        
        <div class="step">
            <input type="checkbox" id="visual1">
            <label for="visual1">
                <span class="success">‚ú® Golden shield aura</span> (v·∫ßng s√°ng m√†u v√†ng) quanh ng·ª±a sau 10 gi√¢y?
            </label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="visual2">
            <label for="visual2">
                <span class="success">üí¨ Text "Divine Shield!"</span> m√†u v√†ng bay l√™n sau 10 gi√¢y?
            </label>
        </div>
        
        <div class="step">
            <input type="checkbox" id="visual3">
            <label for="visual3">
                <span class="success">üí• Golden explosion</span> effect khi skill activate?
            </label>
        </div>
    </div>
    
    <div class="section">
        <h2>‚ùå TROUBLESHOOTING</h2>
        
        <div class="step">
            <strong class="critical">N·∫æU KH√îNG TH·∫§Y B·∫§T K·ª≤ LOG N√ÄO:</strong>
            <ul>
                <li>Code ch∆∞a ƒë∆∞·ª£c load ‚Üí <strong>B·∫ÆT BU·ªòC ph·∫£i Ctrl+R reload l·∫°i!</strong></li>
                <li>Ho·∫∑c Console b·ªã clear ‚Üí Click n√∫t "Clear console" (üö´) r·ªìi ch·∫°y l·∫°i</li>
                <li>Ho·∫∑c skill ch∆∞a ƒë∆∞·ª£c ch·ªçn ƒë√∫ng trong Horse Editor</li>
            </ul>
        </div>
        
        <div class="step">
            <strong class="critical">N·∫æU TH·∫§Y LOG NH∆ØNG KH√îNG TH·∫§Y VISUAL:</strong>
            <ul>
                <li>C√≥ issue v·ªõi rendering code</li>
                <li>Ng·ª±a c√≥ th·ªÉ b·ªã eliminated ho·∫∑c off-screen</li>
                <li>Camera zoom/pan c√≥ th·ªÉ che m·∫•t visual</li>
            </ul>
        </div>
        
        <div class="step">
            <strong class="critical">N·∫æU TH·∫§Y LOG "Race init" NH∆ØNG KH√îNG TH·∫§Y "Activating shield":</strong>
            <ul>
                <li>Ch∆∞a ƒë·ªß 10 gi√¢y ‚Üí Ch·ªù th√™m</li>
                <li>Race ch∆∞a start (gate ch∆∞a m·ªü) ‚Üí ƒê·ª£i countdown xong</li>
                <li>Skill state machine c√≥ issue</li>
            </ul>
        </div>
    </div>
    
    <div class="section">
        <h2>üì∏ G·ª¨I CHO T√îI:</h2>
        <p>N·∫øu v·∫´n kh√¥ng ho·∫°t ƒë·ªông, ch·ª•p screenshot c·ªßa:</p>
        <ol>
            <li><strong>Console (F12)</strong> - To√†n b·ªô logs, cu·ªôn t·ª´ ƒë·∫ßu ƒë·∫øn cu·ªëi</li>
            <li><strong>Horse Editor</strong> - Ph·∫ßn ch·ªçn skill, ch·ª©ng minh ƒë√£ ch·ªçn Guardian</li>
            <li><strong>Game screen</strong> - Sau 10 gi√¢y k·ªÉ t·ª´ l√∫c race start</li>
        </ol>
        <button onclick="alert('1. Press F12\n2. Click Console tab\n3. Right click ‚Üí Save As...')">
            üíæ How to save Console logs
        </button>
    </div>
    
    <div class="section">
        <h2>üîß MANUAL TEST CODE</h2>
        <p>Paste ƒëo·∫°n code n√†y v√†o Console (F12) ƒë·ªÉ test th·ªß c√¥ng:</p>
        <textarea id="testCode" style="width: 100%; height: 150px; font-family: monospace; background: #000; color: #0f0; padding: 10px;">
// Test Guardian skill manually
if (window.horses && window.horses[0]) {
    const h = window.horses[0];
    console.log('Current horse:', h.name, h.id);
    console.log('Current skillState:', h.skillState);
    console.log('hasShield:', h.hasShield);
    console.log('guardianShieldActive:', h.guardianShieldActive);
    
    // Force activate shield
    console.log('üîß FORCING SHIELD ACTIVATION...');
    h.hasShield = true;
    h.guardianShieldActive = true;
    h.shieldUntil = Infinity;
    console.log('‚úÖ Shield forced! hasShield:', h.hasShield);
} else {
    console.error('‚ùå No horses found! Race not started?');
}
        </textarea>
        <button onclick="navigator.clipboard.writeText(document.getElementById('testCode').value)">
            üìã Copy Test Code
        </button>
    </div>
    
    <div class="section">
        <h2>‚ö° QUICK ACTIONS</h2>
        <button onclick="window.location.reload()">üîÑ RELOAD PAGE</button>
        <button onclick="alert('Press F12 on your keyboard')">‚å®Ô∏è Open Console (F12)</button>
        <button onclick="window.open('index.html')">üéÆ Open Game</button>
    </div>
    
    <script>
        // Auto-save checkbox state
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(cb => {
            const saved = localStorage.getItem(cb.id);
            if (saved === 'true') cb.checked = true;
            
            cb.addEventListener('change', () => {
                localStorage.setItem(cb.id, cb.checked);
            });
        });
    </script>
</body>
</html>
